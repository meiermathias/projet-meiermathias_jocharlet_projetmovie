{"version":3,"sources":["scripts/app.js"],"names":["capitalize","text","toUpperCase","slice","toLowerCase","movieController","$stateParams","$http","$ctrl","this","movieId","get","then","result","movie","data","movieReleaseDate","routesConfig","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","hashPrefix","otherwise","state","template","url","$inject","angular","module","service","Save","save","toBeSaved","toBeStored","JSON","stringify","localStorage","setItem","load","unString","getItem","parse","remove","toBeRemoved","liste","i","length","id","splice","toggle","item","hasMovie","push","filter","component","templateUrl","controller","mInput","maListe","ajouterAListe","$id","$title","$overview","$poster","newItem","title","overview","poster","suprimmerAListe","$index","el","indexOf","bindings","movies","results","maVariable","run","$templateCache","put","config"],"mappings":"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","file":"scripts/app-59fdcf3507.js","sourcesContent":["angular\n  .module('app', ['ui.router', 'ngFlag']);\n\nangular\n    .module('app')\n    .service('Save', function () {\n      var Save = this;\n\n      Save.save = function (toBeSaved) {\n        var toBeStored = JSON.stringify(toBeSaved);\n        localStorage.setItem('saved', toBeStored);\n      };\n\n      Save.load = function () {\n        var unString = localStorage.getItem('saved');\n        if (unString) {\n          return JSON.parse(unString);\n        }\n        return [];\n      };\n\n      Save.remove = function (toBeRemoved) {\n        Save.liste = Save.load();\n        for (var i = 0; i < Save.liste.length; i++) {\n          if (Save.liste[i].id === toBeRemoved.id) {\n            Save.liste.splice(i, 1);\n          }\n        }\n        Save.save(Save.liste);\n      };\n    });\n\n  angular\n    .module('app')\n    .service('load', function () {\n      var load = this;\n      load.load = function () {\n        var unString = localStorage.getItem('saved');\n        if (unString) {\n          return JSON.parse(unString);\n        }\n        return [];\n      };\n    });\n\nangular\n    .module('app')\n    .service('data', function (Save) {\n      var data = this;\n      data.liste = Save.load();\n\n      data.toggle = function (item) {\n        data.liste = Save.load();\n        if (data.hasMovie(item)) {\n          Save.remove(item);\n        } else {\n          data.liste.push(item);\n          Save.save(data.liste);\n        }\n      };\n\n      data.hasMovie = function (movie) {\n        for (var i = 0; i < data.liste.length; i++) {\n          if (data.liste[i].id === movie.id) {\n            return true;\n          }\n        }\n        return false;\n      };\n    });\n\nfunction capitalize() {\n  return function (text) {\n    return text[0].toUpperCase() + text.slice(1).toLowerCase();\n  };\n}\n\nangular\n  .module('app')\n  .filter('capitalize', capitalize);\n\n\nangular\n  .module('app')\n  .component('poster', {\n    templateUrl: 'app/poster.html',\n    controller: function (Save, load, data) {\n      var $ctrl = this;\n      $ctrl.mInput = 'test';\n      $ctrl.maListe = load.load();\n\n      $ctrl.ajouterAListe = function ($id, $title, $overview, $poster) {\n        var newItem = {id: $id, title: $title, overview: $overview, poster: $poster};\n        data.toggle(newItem);\n      };\n\n      $ctrl.suprimmerAListe = function ($index) {\n        $ctrl.maListe.splice($index, 1);\n      };\n\n      $ctrl.suprimmerAListe = function (el) {\n        $ctrl.maListe.splice($ctrl.maListe.indexOf(el), 1);\n      };\n    },\n    bindings: {\n      movie: '<'\n    }\n  });\n\nfunction movieController($stateParams, $http) {\n  var $ctrl = this;\n  $ctrl.text = $stateParams.movieId;\n  $http.get('https://amc.ig.he-arc.ch/tmdb/movie/' + $stateParams.movieId + '?language=fr')\n  .then(function (result) {\n    $ctrl.movie = result.data;\n  });\n  $http.get('https://amc.ig.he-arc.ch/tmdb/movie/' + $stateParams.movieId + '/release_dates')\n  .then(function (result) {\n    $ctrl.movieReleaseDate = result.data;\n  });\n}\n\nangular\n  .module('app')\n  .component('movie', {\n    templateUrl: 'app/movie.html',\n    controller: movieController\n  });\n\nangular\n  .module('app')\n  .component('home', {\n      // localStorage.removeItem('saved');\n    templateUrl: 'app/home.html',\n    controller: function (Save, load, $http) {\n      var $ctrl = this;\n      $http.get('https://amc.ig.he-arc.ch/tmdb/movie/upcoming?language=fr')\n      .then(function (result) {\n        $ctrl.movies = result.data.results;\n      });\n\n      $ctrl.maVariable = 'Hello';\n      $ctrl.maListe = load.load();\n\n      $ctrl.ajouterAListe = function () {\n        $ctrl.maListe.push($ctrl.maVariable);\n        Save.save($ctrl.maListe);\n      };\n\n      $ctrl.suprimmerAListe = function ($index) {\n        $ctrl.maListe.splice($index, 1);\n      };\n\n      $ctrl.suprimmerAListe = function (el) {\n        $ctrl.maListe.splice($ctrl.maListe.indexOf(el), 1);\n      };\n    }\n  });\n\nangular.module('app').component('app', {templateUrl: 'app/hello.html'});\n\nangular\n  .module('app')\n  .component('favorit', {\n    templateUrl: 'app/favorit.html',\n    controller: function favoritController(Save, load, $http) {\n      var $ctrl = this;\n      $http.get('https://amc.ig.he-arc.ch/tmdb/movie/upcoming?language=fr')\n      .then(function (result) {\n        $ctrl.movies = result.data.results;\n      });\n      $ctrl.maListe = load.load();\n\n      $ctrl.suprimmerAListe = function ($index) {\n        $ctrl.maListe.splice($index, 1);\n      };\n\n      $ctrl.suprimmerAListe = function (el) {\n        $ctrl.maListe.splice($ctrl.maListe.indexOf(el), 1);\n      };\n    }\n  });\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/favorit.html\",\"<h1>Vos favoris</h1>\\r\\n<div ng-repeat=\\\"movie in $ctrl.maListe track by $index\\\" ng-if=\\\"$index % 3 == 0\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-4\\\"><poster movie=\\\"{index:$index, id:$ctrl.maListe[$index].id, poster_path:$ctrl.maListe[$index].poster, overview:$ctrl.maListe[$index].overview, title:$ctrl.maListe[$index].title}\\\"></poster></div>\\r\\n    <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.maListe.length > ($index + 1)\\\"><poster movie=\\\"{id:$ctrl.maListe[$index+1].id, poster_path:$ctrl.maListe[$index+1].poster, overview:$ctrl.maListe[$index+1].overview, title:$ctrl.maListe[$index+1].title}\\\"></poster></div>\\r\\n    <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.maListe.length > ($index + 2)\\\"><poster movie=\\\"{id:$ctrl.maListe[$index+2].id, poster_path:$ctrl.maListe[$index+2].poster, overview:$ctrl.maListe[$index+2].overview, title:$ctrl.maListe[$index+2].title}\\\"></poster></div>\\r\\n</div>\\r\\n\");\n$templateCache.put(\"app/hello.html\",\"<ui-view></ui-view>\\n\");\n$templateCache.put(\"app/home.html\",\"<div class=\\\"row\\\">\\r\\n  <div class=\\\"jumbotron\\\">\\r\\n <label>Recherche: <input ng-model=\\\"$ctrl.searchText\\\"></label>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!--\\r\\n<div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md12\\\">\\r\\n        <poster ng-repeat=\\\"m in $ctrl.movies\\\" movie=\\\"{id:m.id, poster_path:m.poster_path}\\\"></poster>\\r\\n      </div>\\r\\n</div>\\r\\n-->\\r\\n    <div ng-repeat=\\\"m in $ctrl.movies | filter:$ctrl.searchText track by $index \\\" ng-if=\\\"$index % 3 == 0\\\" class=\\\"row\\\">\\r\\n        <div class=\\\"col-md-4\\\"><poster movie=\\\"{index:$index, id:$ctrl.movies[$index].id, poster_path:$ctrl.movies[$index].poster_path, overview:$ctrl.movies[$index].overview, title:$ctrl.movies[$index].title}\\\"></poster></div>\\r\\n        <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.movies.length > ($index + 1)\\\"><poster movie=\\\"{id:$ctrl.movies[$index+1].id, poster_path:$ctrl.movies[$index+1].poster_path, overview:$ctrl.movies[$index+1].overview, title:$ctrl.movies[$index+1].title}\\\"></poster></div>\\r\\n        <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.movies.length > ($index + 2)\\\"><poster movie=\\\"{id:$ctrl.movies[$index+2].id, poster_path:$ctrl.movies[$index+2].poster_path, overview:$ctrl.movies[$index+2].overview, title:$ctrl.movies[$index+2].title}\\\"></poster></div>\\r\\n    </div>\\r\\n\\r\\n<!--\\r\\n<div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md12\\\">\\r\\n        <ul>\\r\\n          <li ng-repeat=\\\"movie in $ctrl.movies\\\">\\r\\n            <a ui-sref=\\\"app.movie({movieId: movie.id})\\\">  <img  ng-src=\\\"http://image.tmdb.org/t/p/w185/{{movie.poster_path}}\\\" alt=\\\"Description\\\" /> </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n</div>\\r\\n\\r\\n-->\\r\\n\");\n$templateCache.put(\"app/liste.html\",\"<div class=\\\"row\\\">\\n  <div class=\\\"jumbotron\\\">\\n    <h1>Hello World!</h1>\\n  </div>\\n</div>\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-md6\\\">\\n    <div class=\\\"form-group\\\">\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"input\\\" ng-model=\\\"$ctrl.maVariable\\\">\\n    </div>\\n  </div>\\n      <div class=\\\"col-md6\\\">\\n          <h2>Afficher</h2>\\n        <!--  <p>{{$ctrl.capitalize($ctrl.maVariable)}}</p> -->\\n        <p>\\n          {{$ctrl.maVariable | capitalize}}\\n        </p>\\n        <p>\\n          {{$ctrl.maListe}}\\n        </p>\\n        <ul>\\n          <li ng-repeat=\\\"el in $ctrl.maListe track by $index\\\">\\n            <h1 ng-if=\\\"$index == $ctrl.maListe.length / 2\\\">Je suis le milieu!</h1>\\n            {{$index + 1}} {{el | capitalize}}\\n\\n          </li>\\n        </ul>\\n      </div>\\n      <button ng-click=\\\"$ctrl.ajouterAListe()\\\" class=\\\"btn btn-primary\\\">Ajouter</button>\\n</div>\\n\");\n$templateCache.put(\"app/movie.html\",\"<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-md-3\\\">\\r\\n <img onerror=\\\"this.src=\\'http://loremflickr.com/185/252/sexygirl\\'\\\" ng-src=\\\"https://image.tmdb.org/t/p/w185/{{$ctrl.movie.poster_path}}\\\" alt=\\\"Poster\\\">\\r\\n  </div>\\r\\n  <div class=\\\"col-md-9\\\">\\r\\n    <h1>{{$ctrl.movie.title}}</h1>\\r\\n    <h5>{{$ctrl.movie.original_title}}</h5>\\r\\n    <p><strong>Genre :</strong> <span ng-repeat=\\\"genre in $ctrl.movie.genres\\\">{{genre.name}} </span></p>\\r\\n\\r\\n    <p>\\r\\n      <strong>Date de sortie : </strong> <br>\\r\\n      <span ng-repeat=\\\"result in $ctrl.movieReleaseDate.results\\\">\\r\\n        <span ng-repeat=\\\"rdate in result.release_dates\\\" ng-if=\\\"result.iso_3166_1 == \\'FR\\'\\\">\\r\\n          <flag country=\\\"fr\\\" size=\\\"16\\\"></flag>\\r\\n          {{rdate.release_date | limitTo:10}} <br>\\r\\n        </span>\\r\\n        <span ng-repeat=\\\"rdate in result.release_dates\\\" ng-if=\\\"result.iso_3166_1 == \\'US\\'\\\">\\r\\n          <flag country=\\\"us\\\" size=\\\"16\\\"></flag>\\r\\n          {{rdate.release_date | limitTo:10}}  <br>\\r\\n        </span>\\r\\n        <span ng-repeat=\\\"rdate in result.release_dates\\\" ng-if=\\\"result.iso_3166_1 == \\'DE\\'\\\">\\r\\n          <flag country=\\\"de\\\" size=\\\"16\\\"></flag>\\r\\n          {{rdate.release_date | limitTo:10}} <br>\\r\\n        </span>\\r\\n        <span ng-repeat=\\\"rdate in result.release_dates\\\" ng-if=\\\"result.iso_3166_1 == \\'IT\\'\\\">\\r\\n          <flag country=\\\"it\\\" size=\\\"16\\\"></flag>\\r\\n          {{rdate.release_date | limitTo:10}} \\r\\n        </span>\\r\\n      </span>\\r\\n    </p>\\r\\n    <p><strong>Résumé : </strong>{{$ctrl.movie.overview}}</p>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- {{result.iso_3166_1}} -->\");\n$templateCache.put(\"app/poster.html\",\"<div class=\\\"poster thumbnail\\\">\\r\\n  <a ui-sref=\\\"app.movie({movieId: $ctrl.movie.id})\\\"> <img class=\\\"imgPoster\\\" onerror=\\\"this.src=\\'http://loremflickr.com/185/252/sexygirl\\'\\\" ng-src=\\\"https://image.tmdb.org/t/p/w185{{$ctrl.movie.poster_path}}\\\" alt=\\\"Poster\\\"></a>\\r\\n      <span ng-click=\\\"$ctrl.ajouterAListe($ctrl.movie.id, $ctrl.movie.title,  $ctrl.movie.overview,  $ctrl.movie.poster_path)\\\" class=\\\"glyphicon glyphicon-star-empty\\\" aria-hidden=\\\"true\\\"></span>\\r\\n  <div class=\\\"caption\\\">\\r\\n    <h3>{{$ctrl.movie.title | limitTo: 50 }}{{$ctrl.movie.title.length > 50 ? \\'...\\' : \\'\\'}}</h3>\\r\\n    <p class=\\\"desc\\\">{{$ctrl.movie.overview | limitTo: 230 }}{{$ctrl.movie.overview.length > 230 ? \\'...\\' : \\'\\'}}</p>\\r\\n    </div>\\r\\n</div>\\r\\n\");}]);\nangular\n  .module('app')\n  .config(routesConfig);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(false).hashPrefix('!');\n  $urlRouterProvider.otherwise('/');\n\n  $stateProvider\n    .state('app', {\n      template: '<app></app>'\n    })\n    .state('app.home', {\n      url: '/',\n      template: '<home></home>'\n    })\n    .state('app.favorit', {\n      url: '/favorit',\n      template: '<favorit></favorit>'\n    })\n    .state('app.movie', {\n      url: '/movie/:movieId', // fragment url stocké dans movieId\n      template: '<movie></movie>'\n    });\n}\n"],"sourceRoot":"/source/"}